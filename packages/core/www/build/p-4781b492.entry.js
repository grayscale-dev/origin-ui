import{r as a,c as e,h as s}from"./p-CrBU5BAI.js";const r=class{constructor(s){a(this,s),this.rowClick=e(this,"rowClick"),this.reorder=e(this,"reorder"),this.searchChange=e(this,"searchChange"),this.filterChange=e(this,"filterChange"),this.columns=[],this.rows=[],this.searchable=!1,this.filterable=!1,this.reorderable=!1,this.loading=!1,this.emptyText="No results",this.filters=[],this.searchQuery="",this.activeFilters={},this.internalRows=[],this.handleSearch=a=>{const e=a.target.value;this.searchQuery=e,this.searchChange.emit({query:e})},this.handleFilterChange=(a,e)=>{this.activeFilters={...this.activeFilters,[a]:e},this.filterChange.emit({filters:this.activeFilters})},this.handleReorder=(a,e)=>{if(!this.reorderable)return;const s=[...this.internalRows],[r]=s.splice(a,1);s.splice(e,0,r),this.internalRows=s,this.reorder.emit({rows:s})}}componentWillLoad(){this.internalRows=[...this.rows],this.activeFilters=this.filters.reduce(((a,e)=>(e.value&&(a[e.key]=e.value),a)),{})}onRowsChange(a){this.internalRows=[...a]}onFiltersPropChange(a){this.activeFilters=a.reduce(((a,e)=>(e.value&&(a[e.key]=e.value),a)),{})}getFilteredRows(){let a=[...this.internalRows];if(this.searchQuery){const e=this.searchQuery.toLowerCase();a=a.filter((a=>this.columns.some((s=>String(a[s.key]??"").toLowerCase().includes(e)))))}return this.filterable&&Object.keys(this.activeFilters).length>0&&(a=a.filter((a=>Object.entries(this.activeFilters).every((([e,s])=>!s||String(a[e]??"")===s))))),a}getRowId(a,e){return String(this.rowKey&&null!=a[this.rowKey]?a[this.rowKey]:e)}render(){const a=this.getFilteredRows();return s("div",{key:"e22b58f0429a97cf3a9f60b5a55b5ed09057eb45",part:"container",class:"container"},(this.searchable||this.filterable)&&s("div",{key:"58469700433a09327fb96ac2cbf268beae72f936",part:"toolbar",class:"toolbar"},this.searchable&&s("input",{key:"208ba6b8eb338226ba6bdf3605141e1ae6424522",part:"search",class:"search",type:"search",placeholder:"Search...",value:this.searchQuery,onInput:this.handleSearch}),this.filterable&&this.filters.length>0&&s("div",{key:"61aa40639b01cfac9d5cede0c83e33f864e12380",part:"filters",class:"filters"},this.filters.map((a=>{const e=this.activeFilters[a.key]||"";return s("label",{class:"filter",part:"filter",key:a.key},s("span",{class:"filter-label"},a.label),s("select",{class:"filter-select",part:"filter-select",onChange:e=>this.handleFilterChange(a.key,e.target.value)},s("option",{value:"",selected:""===e},"All"),a.options.map((a=>s("option",{value:a.value,selected:e===a.value,key:a.value},a.label)))))}))),s("slot",{key:"89177153d403b4ea7489ad6acea84ecb91cf0d98",name:"filters"})),s("div",{key:"76e496e6fa69f9ddec0d72d320a4d986fb3123b5",part:"table-wrapper",class:"table-wrapper"},s("table",{key:"2afb9a1ee77c66b9ac0ec9d16fd0486204e4c435",part:"table",class:"table"},this.caption&&s("caption",{key:"b8bd696aa6b67b8ee717403867f6ddf4bd0dcce6",part:"caption",class:"caption"},this.caption),s("thead",{key:"8246ea06ef4b4e51ea34d1515e0bd5b9be88ad95"},s("tr",{key:"8410949cf660832c29bea777c24e8ddbfadf2e21",part:"head-row",class:"head-row"},this.columns.map((a=>s("th",{part:"head-cell",class:{"head-cell":!0,[`align-${a.align??"left"}`]:!0},scope:"col",key:a.key},a.header))),this.reorderable&&s("th",{key:"a61d7217900a1f9b387d9bbec6e83da972ac2876",part:"head-cell",class:"head-cell"},"Order"))),s("tbody",{key:"c1a5b565873881c29a78c26582d3fba504a7f2d2"},this.loading?s("tr",{part:"row"},s("td",{part:"cell",class:"cell",colSpan:this.columns.length+(this.reorderable?1:0)},"Loading...")):0===a.length?s("tr",{part:"row"},s("td",{part:"cell",class:"cell",colSpan:this.columns.length+(this.reorderable?1:0)},s("slot",{name:"empty"},this.emptyText))):a.map(((e,r)=>s("tr",{part:"row",class:"row",onClick:()=>this.rowClick.emit({row:e}),key:this.getRowId(e,r)},this.columns.map((a=>s("td",{part:"cell",class:{cell:!0,[`align-${a.align??"left"}`]:!0},key:`${this.getRowId(e,r)}-${a.key}`},a.render?a.render(e):String(e[a.key]??"â€”")))),this.reorderable&&s("td",{part:"cell",class:"cell"},s("div",{class:"reorder-controls"},s("button",{part:"reorder-up",class:"reorder-button",type:"button",onClick:a=>{a.stopPropagation(),this.handleReorder(r,Math.max(0,r-1))}},"Up"),s("button",{part:"reorder-down",class:"reorder-button",type:"button",onClick:e=>{e.stopPropagation(),this.handleReorder(r,Math.min(a.length-1,r+1))}},"Down"))))))))))}static get watchers(){return{rows:[{onRowsChange:0}],filters:[{onFiltersPropChange:0}]}}};r.style=":host{display:block;font-family:var(--signal-font-sans)}.container{border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);background:var(--signal-color-surface);-webkit-box-shadow:var(--signal-shadow-soft);box-shadow:var(--signal-shadow-soft);overflow:hidden}.toolbar{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--signal-space-2);padding:var(--signal-space-3) var(--signal-space-4);border-bottom:1px solid var(--signal-color-border);-ms-flex-align:center;align-items:center}.search{border-radius:var(--signal-radius-sm);border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-text);font:inherit;font-size:12px;padding:6px 10px}.search:focus{outline:none;border-color:var(--signal-color-accent);-webkit-box-shadow:var(--signal-shadow-focus);box-shadow:var(--signal-shadow-focus)}.filters{display:-ms-flexbox;display:flex;gap:var(--signal-space-2);-ms-flex-align:center;align-items:center}.filter{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;gap:4px;font-size:11px;color:var(--signal-color-subtle)}.filter-label{text-transform:uppercase;letter-spacing:0.08em;font-weight:600}.filter-select{border-radius:var(--signal-radius-sm);border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-text);font:inherit;font-size:12px;padding:4px 8px}.table-wrapper{overflow-x:auto}.table{width:100%;border-collapse:collapse;font-size:13px;color:var(--signal-color-text)}.caption{text-align:left;padding:var(--signal-space-3) var(--signal-space-4);font-size:12px;color:var(--signal-color-subtle)}.head-row{background:var(--signal-color-muted);color:var(--signal-color-subtle)}.head-cell{padding:var(--signal-space-3) var(--signal-space-4);text-align:left;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em}.row{border-top:1px solid var(--signal-color-border)}.row:hover{background:var(--signal-color-muted)}.cell{padding:var(--signal-space-3) var(--signal-space-4);vertical-align:middle}.align-right{text-align:right}.align-center{text-align:center}.reorder-controls{display:-ms-flexbox;display:flex;gap:var(--signal-space-2)}.reorder-button{border-radius:var(--signal-radius-sm);border:1px solid var(--signal-color-border);background:var(--signal-color-surface);font-size:11px;padding:4px 8px;cursor:pointer}.reorder-button:hover{background:var(--signal-color-muted)}";export{r as signal_table}