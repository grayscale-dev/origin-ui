import{p as t,H as i,c as s,h as e,t as o}from"./index.js";const a=t(class extends i{constructor(t){super(),!1!==t&&this.__registerHost(),this.__attachShadow(),this.openChange=s(this,"openChange"),this.close=s(this,"close"),this.confirm=s(this,"confirm"),this.open=!1,this.size="md",this.closeOnBackdrop=!0,this.closeOnEsc=!0,this.dragEnabled=!1,this.resizable=!1,this.fullscreen=!1,this.showHeaderControls=!0,this.showConfirm=!1,this.confirmText="Confirm",this.position={x:0,y:0},this.sizeState={width:680,height:480},this.lastActiveElement=null,this.previousOverflow="",this.dragging=!1,this.resizing=!1,this.dragStart={x:0,y:0,signalX:0,signalY:0},this.resizeStart={x:0,y:0,width:0,height:0},this.handleTrapFocus=t=>{if("Tab"!==t.key)return;const i=this.getFocusableElements();if(0===i.length)return;const s=i[0],e=i[i.length-1];t.shiftKey&&document.activeElement===s?(t.preventDefault(),e.focus()):t.shiftKey||document.activeElement!==e||(t.preventDefault(),s.focus())},this.handleDragStart=t=>{this.dragEnabled&&!this.fullscreen&&(t.target.closest("button")||(this.dragging=!0,this.dragStart={x:t.clientX,y:t.clientY,signalX:this.position.x,signalY:this.position.y},window.addEventListener("pointermove",this.handleDragMove),window.addEventListener("pointerup",this.handleDragEnd)))},this.handleDragMove=t=>{this.dragging&&(this.position={x:this.dragStart.signalX+(t.clientX-this.dragStart.x),y:this.dragStart.signalY+(t.clientY-this.dragStart.y)})},this.handleDragEnd=()=>{this.dragging=!1,window.removeEventListener("pointermove",this.handleDragMove),window.removeEventListener("pointerup",this.handleDragEnd)},this.handleResizeStart=t=>{this.resizable&&!this.fullscreen&&(t.stopPropagation(),this.resizing=!0,this.resizeStart={x:t.clientX,y:t.clientY,width:this.sizeState.width,height:this.sizeState.height},window.addEventListener("pointermove",this.handleResizeMove),window.addEventListener("pointerup",this.handleResizeEnd))},this.handleResizeMove=t=>{if(!this.resizing)return;const i=this.resizeStart.width+(t.clientX-this.resizeStart.x),s=this.resizeStart.height+(t.clientY-this.resizeStart.y),e=this.minSize?.width??360,o=this.minSize?.height??240,a=this.maxSize?.width??1200,n=this.maxSize?.height??900;this.sizeState={width:Math.max(e,Math.min(a,i)),height:Math.max(o,Math.min(n,s))}},this.handleResizeEnd=()=>{this.resizing=!1,window.removeEventListener("pointermove",this.handleResizeMove),window.removeEventListener("pointerup",this.handleResizeEnd)},this.handleHeaderKeyDown=t=>{this.dragEnabled&&("Enter"!==t.key&&" "!==t.key||t.preventDefault())}}onOpenChange(t){this.openChange.emit({open:t}),t?(this.lastActiveElement=document.activeElement,this.previousOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this.resetPosition(),requestAnimationFrame((()=>this.focusFirstElement()))):(document.body.style.overflow=this.previousOverflow,this.lastActiveElement?.focus())}componentWillLoad(){this.defaultSize&&(this.sizeState={...this.defaultSize}),this.defaultPosition&&(this.position={...this.defaultPosition})}componentDidLoad(){this.open&&this.onOpenChange(!0)}handleGlobalKeydown(t){this.open&&("Escape"===t.key&&this.closeOnEsc&&(t.preventDefault(),this.requestClose()),"Tab"===t.key&&this.handleTrapFocus(t))}focusFirstElement(){const t=this.getFocusableElements();t.length>0?t[0].focus():this.dialogEl?.focus()}getFocusableElements(){return this.dialogEl?Array.from(this.dialogEl.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter((t=>!t.hasAttribute("disabled"))):[]}requestClose(){this.close.emit(),this.open=!1}resetPosition(){this.position=this.defaultPosition?{...this.defaultPosition}:{x:0,y:0}}render(){if(!this.open)return null;const t=this.fullscreen?{}:{transform:`translate(${this.position.x}px, ${this.position.y}px)`};this.fullscreen||!this.resizable&&!this.defaultSize||(t.width=this.sizeState.width+"px",t.height=this.sizeState.height+"px");const i=this.dragEnabled?"button":void 0,s=this.dragEnabled?0:void 0,o=this.dragEnabled?this.handleDragStart:void 0,a=this.dragEnabled?this.handleHeaderKeyDown:void 0;return e("div",{part:"overlay",class:"overlay"},e("div",{part:"backdrop",class:"backdrop",onClick:this.closeOnBackdrop?()=>this.requestClose():void 0,"aria-hidden":"true"}),e("div",{part:"dialog",class:{dialog:!0,fullscreen:this.fullscreen},role:"dialog","aria-modal":"true","aria-label":this.heading,style:t,ref:t=>this.dialogEl=t,tabindex:-1},e("div",{part:"header",class:"header",role:i,tabIndex:s,onPointerDown:o,onKeyDown:a},e("slot",{name:"header"},e("div",{class:"header-content"},e("div",null,this.heading&&e("h2",{class:"title"},this.heading),this.description&&e("p",{class:"description"},this.description)),this.showHeaderControls&&e("div",{class:"header-actions"},this.showConfirm&&e("button",{class:"header-button",type:"button",onClick:()=>this.confirm.emit()},this.confirmText),e("button",{class:"close-button",type:"button","aria-label":"Close dialog",onClick:()=>this.requestClose()},"Ã—"))))),e("div",{part:"body",class:"body"},e("slot",null)),e("div",{part:"footer",class:"footer"},e("slot",{name:"footer"})),this.resizable&&!this.fullscreen&&e("div",{part:"resize-handle",class:"resize-handle",onPointerDown:this.handleResizeStart})))}get host(){return this}static get watchers(){return{open:[{onOpenChange:0}]}}static get style(){return':host{font-family:var(--signal-font-sans)}.overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:var(--signal-space-4);z-index:1000}.backdrop{position:absolute;inset:0;background:var(--signal-color-overlay);backdrop-filter:blur(6px)}.dialog{position:relative;z-index:1;background:var(--signal-color-surface);border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);box-shadow:var(--signal-shadow-strong);display:flex;flex-direction:column;max-width:calc(100vw - 4rem);max-height:calc(100vh - 4rem);min-width:320px;overflow:hidden}:host([size="sm"]) .dialog{width:min(100%, 520px)}:host([size="md"]) .dialog{width:min(100%, 720px)}:host([size="lg"]) .dialog{width:min(100%, 960px)}.dialog.fullscreen{width:calc(100vw - 2rem);height:calc(100vh - 2rem);max-width:none;max-height:none;border-radius:var(--signal-radius-sm)}.header{border-bottom:1px solid var(--signal-color-border);padding:var(--signal-space-4) var(--signal-space-5);background:var(--signal-color-surface)}.header-content{display:flex;align-items:flex-start;justify-content:space-between;gap:var(--signal-space-4)}.title{font-size:15px;margin:0;color:var(--signal-color-text)}.description{font-size:13px;margin:4px 0 0;color:var(--signal-color-subtle)}.header-actions{display:inline-flex;gap:var(--signal-space-2);align-items:center}.header-button{border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-subtle);border-radius:var(--signal-radius-sm);padding:4px 8px;font-size:12px;cursor:pointer}.close-button{width:32px;height:32px;border-radius:var(--signal-radius-sm);border:none;background:transparent;color:var(--signal-color-subtle);font-size:20px;cursor:pointer}.close-button:hover,.header-button:hover{background:var(--signal-color-muted)}.close-button:focus-visible,.header-button:focus-visible{outline:none;box-shadow:var(--signal-shadow-focus)}.body{padding:var(--signal-space-5);color:var(--signal-color-text);overflow:auto;flex:1}.footer{border-top:1px solid var(--signal-color-border);padding:var(--signal-space-4) var(--signal-space-5);background:var(--signal-color-surface)}.resize-handle{position:absolute;right:6px;bottom:6px;width:14px;height:14px;cursor:se-resize;background:transparent}:host([drag-enabled]) .header{cursor:move}'}},[257,"signal-modal",{open:[1540],heading:[1],description:[1],size:[513],closeOnBackdrop:[516,"close-on-backdrop"],closeOnEsc:[516,"close-on-esc"],dragEnabled:[516,"drag-enabled"],resizable:[516],fullscreen:[516],showHeaderControls:[516,"show-header-controls"],showConfirm:[516,"show-confirm"],confirmText:[1,"confirm-text"],defaultSize:[16],minSize:[16],maxSize:[16],defaultPosition:[16],position:[32],sizeState:[32]},[[4,"keydown","handleGlobalKeydown"]],{open:[{onOpenChange:0}]}]),n=a,r=function(){"undefined"!=typeof customElements&&["signal-modal"].forEach((t=>{"signal-modal"===t&&(customElements.get(o(t))||customElements.define(o(t),a))}))};export{n as SignalModal,r as defineCustomElement}