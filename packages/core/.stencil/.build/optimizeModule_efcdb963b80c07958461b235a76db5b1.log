import{p as e,H as t,c as a,h as r,t as s}from"./index.js";const l=e(class extends t{constructor(e){super(),!1!==e&&this.__registerHost(),this.__attachShadow(),this.rowClick=a(this,"rowClick"),this.reorder=a(this,"reorder"),this.searchChange=a(this,"searchChange"),this.filterChange=a(this,"filterChange"),this.columns=[],this.rows=[],this.searchable=!1,this.filterable=!1,this.reorderable=!1,this.loading=!1,this.emptyText="No results",this.filters=[],this.searchQuery="",this.activeFilters={},this.internalRows=[],this.handleSearch=e=>{const t=e.target.value;this.searchQuery=t,this.searchChange.emit({query:t})},this.handleFilterChange=(e,t)=>{this.activeFilters={...this.activeFilters,[e]:t},this.filterChange.emit({filters:this.activeFilters})},this.handleReorder=(e,t)=>{if(!this.reorderable)return;const a=[...this.internalRows],[r]=a.splice(e,1);a.splice(t,0,r),this.internalRows=a,this.reorder.emit({rows:a})}}componentWillLoad(){this.internalRows=[...this.rows],this.activeFilters=this.filters.reduce(((e,t)=>(t.value&&(e[t.key]=t.value),e)),{})}onRowsChange(e){this.internalRows=[...e]}onFiltersPropChange(e){this.activeFilters=e.reduce(((e,t)=>(t.value&&(e[t.key]=t.value),e)),{})}getFilteredRows(){let e=[...this.internalRows];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>this.columns.some((a=>((e[a.key]??"")+"").toLowerCase().includes(t)))))}return this.filterable&&Object.keys(this.activeFilters).length>0&&(e=e.filter((e=>Object.entries(this.activeFilters).every((([t,a])=>!a||(e[t]??"")+""===a))))),e}getRowId(e,t){return this.rowKey&&null!=e[this.rowKey]?e[this.rowKey]+"":t+""}render(){const e=this.getFilteredRows();return r("div",{key:"cb57f194381a796eb3d1dfb5ecb458cabefd8936",part:"container",class:"container"},(this.searchable||this.filterable)&&r("div",{key:"3221814e6e122ab3a3beffffbbf2228b1d9519a8",part:"toolbar",class:"toolbar"},this.searchable&&r("input",{key:"5ae4c5ce773cf78022a01263846bffd697e9042b",part:"search",class:"search",type:"search",placeholder:"Search...",value:this.searchQuery,onInput:this.handleSearch}),this.filterable&&this.filters.length>0&&r("div",{key:"c26b94c8381c389f7df2f378e88e1337eee63629",part:"filters",class:"filters"},this.filters.map((e=>{const t=this.activeFilters[e.key]||"";return r("label",{class:"filter",part:"filter",key:e.key},r("span",{class:"filter-label"},e.label),r("select",{class:"filter-select",part:"filter-select",onChange:t=>this.handleFilterChange(e.key,t.target.value)},r("option",{value:"",selected:""===t},"All"),e.options.map((e=>r("option",{value:e.value,selected:t===e.value,key:e.value},e.label)))))}))),r("slot",{key:"39e19a8cb29a8fb42f57fb07345972ad84bd05bc",name:"filters"})),r("div",{key:"2afb51fb475c7d00d5825413ccd81fc7d64ac315",part:"table-wrapper",class:"table-wrapper"},r("table",{key:"6bf822598db5af41cfcb67e6b896bdb98f6e0082",part:"table",class:"table"},this.caption&&r("caption",{key:"e22c502569a5e64f49921500df9aa98f7c199664",part:"caption",class:"caption"},this.caption),r("thead",{key:"bc05501ac6a61d982b9b6bfb924d3b67984b5941"},r("tr",{key:"9bb3d8fa3ecf5ff19117e991bba272f9151dd42c",part:"head-row",class:"head-row"},this.columns.map((e=>r("th",{part:"head-cell",class:{"head-cell":!0,["align-"+(e.align??"left")]:!0},scope:"col",key:e.key},e.header))),this.reorderable&&r("th",{key:"ab8fc800c23272d54614770bee37002476a39853",part:"head-cell",class:"head-cell"},"Order"))),r("tbody",{key:"9e9d0a56023e56a49cb8816e03bc78673cd71b40"},this.loading?r("tr",{part:"row"},r("td",{part:"cell",class:"cell",colSpan:this.columns.length+(this.reorderable?1:0)},"Loading...")):0===e.length?r("tr",{part:"row"},r("td",{part:"cell",class:"cell",colSpan:this.columns.length+(this.reorderable?1:0)},r("slot",{name:"empty"},this.emptyText))):e.map(((t,a)=>r("tr",{part:"row",class:"row",onClick:()=>this.rowClick.emit({row:t}),key:this.getRowId(t,a)},this.columns.map((e=>r("td",{part:"cell",class:{cell:!0,["align-"+(e.align??"left")]:!0},key:`${this.getRowId(t,a)}-${e.key}`},e.render?e.render(t):(t[e.key]??"â€”")+""))),this.reorderable&&r("td",{part:"cell",class:"cell"},r("div",{class:"reorder-controls"},r("button",{part:"reorder-up",class:"reorder-button",type:"button",onClick:e=>{e.stopPropagation(),this.handleReorder(a,Math.max(0,a-1))}},"Up"),r("button",{part:"reorder-down",class:"reorder-button",type:"button",onClick:t=>{t.stopPropagation(),this.handleReorder(a,Math.min(e.length-1,a+1))}},"Down"))))))))))}static get watchers(){return{rows:[{onRowsChange:0}],filters:[{onFiltersPropChange:0}]}}static get style(){return":host{display:block;font-family:var(--signal-font-sans)}.container{border:1px solid var(--signal-color-border);border-radius:var(--signal-radius-md);background:var(--signal-color-surface);box-shadow:var(--signal-shadow-soft);overflow:hidden}.toolbar{display:flex;flex-wrap:wrap;gap:var(--signal-space-2);padding:var(--signal-space-3) var(--signal-space-4);border-bottom:1px solid var(--signal-color-border);align-items:center}.search{border-radius:var(--signal-radius-sm);border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-text);font:inherit;font-size:12px;padding:6px 10px}.search:focus{outline:none;border-color:var(--signal-color-accent);box-shadow:var(--signal-shadow-focus)}.filters{display:flex;gap:var(--signal-space-2);align-items:center}.filter{display:inline-flex;flex-direction:column;gap:4px;font-size:11px;color:var(--signal-color-subtle)}.filter-label{text-transform:uppercase;letter-spacing:0.08em;font-weight:600}.filter-select{border-radius:var(--signal-radius-sm);border:1px solid var(--signal-color-border);background:var(--signal-color-surface);color:var(--signal-color-text);font:inherit;font-size:12px;padding:4px 8px}.table-wrapper{overflow-x:auto}.table{width:100%;border-collapse:collapse;font-size:13px;color:var(--signal-color-text)}.caption{text-align:left;padding:var(--signal-space-3) var(--signal-space-4);font-size:12px;color:var(--signal-color-subtle)}.head-row{background:var(--signal-color-muted);color:var(--signal-color-subtle)}.head-cell{padding:var(--signal-space-3) var(--signal-space-4);text-align:left;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em}.row{border-top:1px solid var(--signal-color-border)}.row:hover{background:var(--signal-color-muted)}.cell{padding:var(--signal-space-3) var(--signal-space-4);vertical-align:middle}.align-right{text-align:right}.align-center{text-align:center}.reorder-controls{display:flex;gap:var(--signal-space-2)}.reorder-button{border-radius:var(--signal-radius-sm);border:1px solid var(--signal-color-border);background:var(--signal-color-surface);font-size:11px;padding:4px 8px;cursor:pointer}.reorder-button:hover{background:var(--signal-color-muted)}"}},[257,"signal-table",{columns:[16],rows:[16],caption:[1],rowKey:[1,"row-key"],searchable:[516],filterable:[516],reorderable:[516],loading:[516],emptyText:[1,"empty-text"],filters:[16],searchQuery:[32],activeFilters:[32],internalRows:[32]},void 0,{rows:[{onRowsChange:0}],filters:[{onFiltersPropChange:0}]}]),i=l,o=function(){"undefined"!=typeof customElements&&["signal-table"].forEach((e=>{"signal-table"===e&&(customElements.get(s(e))||customElements.define(s(e),l))}))};export{i as SignalTable,o as defineCustomElement}